<tal:condition tal:condition="view/auth_token">
  <div id="plone-interact-overlay" ng-app="task" class="overlay overlay-ajax">
    <div class="close plone-interact-close"></div>
    <div class="pb-ajax">
      <div ng-controller="Task">
        <form ng-submit="addTask()">
          <input type="submit" id="submit" value="Add Task">
          <input type="text" ng-model="message" placeholder="Enter task description...">
        </form>
        <p></p>
        <div id="messagesDiv" class="messagesDiv" style="height:500px; overflow: auto;">
          <div ng-cloak ng-repeat="task in messages | orderBy:'$index':true">
            <em>{{task.ts | date:dateFormat }} {{task.from}}: </em>{{task.content}}
            <a href="#" ng-click="removeTask(task)">Done</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
    // Add me to the end of the body. Fixes z-index issue.
    // Make sure this all takes place before angular starts to bind.
    jQuery('#plone-interact-overlay').appendTo('body');
  </script>
  <script src="../../components/angular/angular.js"
    tal:attributes="src string:${context/++resource++ploneinteract}/dist/components/angular/angular.js"
    ></script>
  <script src="https://cdn.firebase.com/v0/firebase.js"></script>
  <script src="angularfire.js"
    tal:attributes = "src context/++resource++ploneinteract/angularFire.js" 
    ></script>
  <script src="app.js"
    tal:attributes = "src context/++resource++ploneinteract/app.js"
    ></script>
  <meta name="plone-interact-auth-token"
    tal:attributes="content view/auth_token">
  <meta name="plone-interact-firebase-url"
    tal:attributes="content view/config/firebase_url">
</tal:condition>