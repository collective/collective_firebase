<div tal:condition="view/data/omit_border"
     tal:attributes="class string:portletStaticText ${view/css_class}"
     tal:content="structure view/transformed" />
<dl tal:condition="not:view/data/omit_border"
    tal:attributes="class string:portlet portletStaticText ${view/css_class}"
    i18n:domain="plone"
    ng-app="chat"
    >

    <dt class="portletHeader"
        tal:define="header view/data/header"
        tal:attributes="class python:header and 'portletHeader' or 'portletHeader titleless'">
        <span class="portletTopLeft"></span>
        <span>
           <a class="tile"
              tal:condition="header"
              tal:omit-tag="not:view/has_link"
              tal:attributes="href view/data/more_url"
              tal:content="header"
              />
        </span>
        <span class="portletTopRight"></span>
    </dt>

    <dd class="portletItem odd">

        <script src="../../components/angular/angular.js"
            tal:attributes="src string:${context/++resource++firebaseplonedemo}/dist/components/angular/angular.js"
          ></script>
        <div ng-controller="Chat">
          <div>
            <label for="">Your name: </label><input type="text" ng-model="username">
          </div>
          <p></p>
          <div id="messagesDiv" class="messagesDiv" style="height:500px; overflow: auto;">
            <div ng-cloak ng-repeat="message in messages">
              <em>{{message.from}}: </em>{{message.content}}
            </div>
          </div>
          <form ng-submit="addMessage()">
            <input type="text" ng-model="message" placeholder="Message...">
            <input type="submit" id="submit" value="Send" style="font-size:24px;">
          </form>
          <script src="https://cdn.firebase.com/v0/firebase.js"></script>
          <script src="angularfire.js" 
                  tal:attributes = "src context/++resource++firebaseplonedemo/angularFire.js" 
            ></script>
          <meta name="firebaseplonedemo-auth-token" tal:attributes="content context/gen_auth_token">
          <script src="app.js"
                  tal:attributes = "src context/++resource++firebaseplonedemo/app.js" 
            ></script>
        </div>

        <tal:corners condition="not:view/has_footer">
            <span class="portletBottomLeft"></span>
            <span class="portletBottomRight"></span>
        </tal:corners>
    </dd>
    
    <dd class="portletFooter" tal:condition="view/has_footer">
        <span class="portletBottomLeft"></span>
        <span>
           <a class="tile"
              tal:omit-tag="not:view/has_link"
              tal:attributes="href view/data/more_url"
              tal:content="view/data/footer"
              />
        </span>
        <span class="portletBottomRight"></span>
    </dd>

</dl>
